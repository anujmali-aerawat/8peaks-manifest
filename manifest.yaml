region: us-east-1
version: 2021-03-15

resources:
  - name: DenyLargeInstances
    description: SCP to deny large EC2, RDS, and SageMaker instances plus AI services
    resource_file: policies/deny_instances.json
    deploy_method: scp
    deployment_targets:
      organizational_units:
        - Root

  - name: DenyOrganizations
    description: SCP to hide Organizations API, block management account access, and deny IAM console access
    resource_file: policies/deny_organizations.json
    deploy_method: scp
    deployment_targets:
      organizational_units:
        - Customer

  - name: BudgetAlerts
    description: Monthly budget with SNS alerts for cost monitoring
    resource_file: templates/budgets.yaml
    deploy_method: stack_set
    deployment_targets:
      organizational_units:
        - Customer
    parameters:
      - parameter_key: AlertEmail
        parameter_value: "your-email@8peaks.io"